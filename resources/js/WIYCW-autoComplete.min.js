	  !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).autoComplete=e()}(this,function(){"use strict";function e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function c(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e(Object(i),!0).forEach(function(t){var e,n;e=r,t=i[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){return"string"==typeof t?document.querySelector(t):t()}function f(t,e){return t=t.toString().toLowerCase(),e?t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):t}function p(t,e){return h("mark",c({innerHTML:t},"string"==typeof e&&{class:e})).outerHTML}function d(t,e){t.feedback.selection=c({index:e},t.feedback.results[e])}var h=function(t,e){var n,r="string"==typeof t?document.createElement(t):t;for(n in e){var i,o=e[n];"inside"===n?o.append(r):"dest"===n?a(o[0]).insertAdjacentElement(o[1],r):"around"===n?((i=o).parentNode.insertBefore(r,i),r.append(i),null!=i.getAttribute("autofocus")&&i.focus()):n in r?r[n]=o:r.setAttribute(n,o)}return r},m=function(t){return t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?t.value:t.innerHTML},b=function(t,e,n){return e?e(t):t.length>=n},n=function(t){var e,n=t.name,r=t.options,i=t.resultsList,o=t.resultItem;for(e in r)if("object"===u(r[e]))for(var s in t[e]||(t[e]={}),r[e])t[e][s]=r[e][s];else t[e]=r[e];t.selector=t.selector||"#"+n,i.destination=i.destination||t.selector,i.id=i.id||n+"_list_"+t.id,o.id=o.id||n+"_result",t.input=a(t.selector)},y=function(t,e){e.input.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e.feedback,cancelable:!0}))},v=function(n,t,e){var r=e||{},i=r.mode,e=r.diacritics,o=r.highlight,s=f(t,e);if(t=t.toString(),n=f(n,e),"loose"===i){var u=(n=n.replace(/ /g,"")).length,c=0,a=Array.from(t).map(function(t,e){return c<u&&s[e]===n[c]&&(t=o?p(t,o):t,c++),t}).join("");if(c===u)return a}else{a=s.indexOf(n);if(~a)return n=t.substring(a,a+n.length),o?t.replace(n,p(n,o)):t}},g=function(i,o){return new Promise(function(e,n){var r=i.data;return r.cache&&r.store?e():new Promise(function(t,e){return"function"==typeof r.src?r.src(o).then(t,e):t(r.src)}).then(function(t){try{return i.feedback=r.store=t,y("response",i),e()}catch(t){return n(t)}},n)})},w=function(o,s){var u=s.data,c=s.searchEngine,a=[];u.store.forEach(function(n,t){function e(t){var e=t?n[t]:n;(e="function"==typeof c?c(o,e):v(o,e,{mode:c,diacritics:s.diacritics,highlight:s.resultItem.highlight}))&&(e={match:e,value:n},t&&(e.key=t),a.push(e))}if(u.keys){var r,i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(u.keys);try{for(i.s();!(r=i.n()).done;)e(r.value)}catch(t){i.e(t)}finally{i.f()}}else e()}),u.filter&&(a=u.filter(a));var t=a.slice(0,s.resultsList.maxResults);s.feedback={query:o,matches:a,results:t},y("results",s)},i="aria-expanded",O="aria-activedescendant",A="aria-selected",k=function(t){var n,e=t.resultsList,r=t.list,i=t.resultItem,o=t.feedback,s=o.matches,u=o.results;t.cursor=-1,r.innerHTML="",s.length||e.noResults?(n=new DocumentFragment,u.forEach(function(t,e){e=h(i.tag,c({id:"".concat(i.id,"_").concat(e),role:"option",innerHTML:t.match,inside:n},i.class&&{class:i.class}));i.element&&i.element(e,t)}),r.append(n),e.element&&e.element(r,o),L(t)):j(t)},L=function(t){t.isOpen||((t.wrapper||t.input).setAttribute(i,!0),t.list.removeAttribute("hidden"),t.isOpen=!0,y("open",t))},j=function(t){t.isOpen&&((t.wrapper||t.input).setAttribute(i,!1),t.input.setAttribute(O,""),t.list.setAttribute("hidden",""),t.isOpen=!1,y("close",t))},o=function(t,e){var n,r=e.resultItem,i=e.list.getElementsByTagName(r.tag),o=!!r.selected&&r.selected.split(" ");e.isOpen&&i.length&&(r=e.cursor,t>=i.length&&(t=0),t<0&&(t=i.length-1),e.cursor=t,-1<r&&(i[r].removeAttribute(A),o&&(n=i[r].classList).remove.apply(n,s(o))),i[t].setAttribute(A,!0),o&&(n=i[t].classList).add.apply(n,s(o)),e.input.setAttribute(O,i[e.cursor].id),e.list.scrollTop=i[t].offsetTop-e.list.clientHeight+i[t].clientHeight+5,e.feedback.cursor=e.cursor,d(e,t),y("navigate",e))},S=function(t){o(t.cursor+1,t)},T=function(t){o(t.cursor-1,t)},E=function(t,e,n){(n=0<=n?n:t.cursor)<0||(t.feedback.event=e,d(t,n),y("selection",t),j(t))};function x(o,t){var s=this;return new Promise(function(e,n){var r=t||m(o.input);return r=o.query?o.query(r):r,b(r,o.trigger,o.threshold)?g(o,r).then(function(t){try{return o.feedback instanceof Error?e():(w(r,o),o.resultsList&&k(o),i.call(s))}catch(t){return n(t)}},n):(j(o),i.call(s));function i(){return e()}})}function I(t,e){for(var n in t)for(var r in t[n])e(n,r)}var P=function(o){var t,e,n,r=o.events,i=(t=function(){return x(o)},e=o.debounce,function(){clearTimeout(n),n=setTimeout(function(){return t()},e)}),s=o.events=c({input:c({},r&&r.input)},o.resultsList&&{list:r?c({},r.list):{}}),u={input:{input:function(){i()},keydown:function(t){!function(t,e){switch(t.keyCode){case 40:case 38:t.preventDefault(),(40===t.keyCode?S:T)(e);break;case 13:e.submit||t.preventDefault(),0<=e.cursor&&E(e,t);break;case 9:e.resultsList.tabSelect&&0<=e.cursor&&E(e,t);break;case 27:e.input.value="",j(e)}}(t,o)},blur:function(){}},list:{mousedown:function(t){t.preventDefault()},click:function(t){var e,n,r,i;e=t,r=(n=o).resultItem.tag.toUpperCase(),i=Array.from(n.list.querySelectorAll(r)),(t=e.target.closest(r))&&t.nodeName===r&&E(n,e,i.indexOf(t))}}};I(u,function(t,e){!o.resultsList&&"input"!==e||s[t][e]||(s[t][e]=u[t][e])}),I(s,function(t,e){o[t].addEventListener(e,s[t][e])})},C=function(n){I(n.events,function(t,e){n[t].removeEventListener(e,n.events[t][e])})};function H(s){var u=this;return new Promise(function(t,e){var n=s.placeHolder,r=s.resultsList,i={role:"combobox","aria-owns":r.id,"aria-haspopup":!0,"aria-expanded":!1};return h(s.input,c(c({"aria-controls":r.id,"aria-autocomplete":"both"},n&&{placeholder:n}),!s.wrapper&&c({},i))),s.wrapper&&(s.wrapper=h("div",c({around:s.input,class:s.name+"_wrapper"},i))),r&&(s.list=h(r.tag,c({dest:[r.destination,r.position],id:r.id,role:"listbox",hidden:"hidden"},r.class&&{class:r.class}))),P(s),s.data.cache?g(s).then(function(t){try{return o.call(u)}catch(t){return e(t)}},e):o.call(u);function o(){return y("init",s),t()}})}function D(t){this.options=t,this.id=D.instances=(D.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},n(this),function(t){(t=t.prototype).init=function(){H(this)},t.start=function(t){x(this,t)},t.unInit=function(){var t;this.wrapper&&((t=this.wrapper.parentNode).insertBefore(this.input,this.wrapper),t.removeChild(this.wrapper)),C(this)},t.open=function(){L(this)},t.close=function(){j(this)},t.goTo=function(t){o(t,this)},t.next=function(){S(this)},t.previous=function(){T(this)},t.select=function(t){E(this,null,t)},t.search=function(t,e,n){return v(t,e,n)}}.call(this,D),H(this)}return D});
